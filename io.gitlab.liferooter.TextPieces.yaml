# SPDX-FileCopyrightText: 2023 Gleb Smirnov <glebsmirnov0708@gmail.com>
#
# SPDX-License-Identifier: CC0-1.0

id: io.gitlab.liferooter.TextPieces

runtime: org.gnome.Platform
runtime-version: '49'

sdk: org.gnome.Sdk
sdk-extensions:
- org.freedesktop.Sdk.Extension.rust-stable

command: textpieces

finish-args:
- --socket=fallback-x11
- --socket=wayland
- --device=dri
- --share=ipc
- --talk-name=org.freedesktop.Flatpak
- --filesystem=~/.local/share/textpieces

modules:

- name: textpieces
  buildsystem: meson
  build-options:
    append-path: /usr/lib/sdk/rust-stable/bin
  sources:
  - type: archive
    url: https://gitlab.com/liferooter/textpieces/-/archive/4.3.1/textpieces-4.3.1.tar.gz
    sha256: 27f24c9eb8b4ce358ab676da76200e33623ea327ff8518712de2a72354a1339c
  - cargo-sources.json
  - type: shell
    commands:
    - mkdir .cargo
    - cp cargo/config .cargo/config.toml
